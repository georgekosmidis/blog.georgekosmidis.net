<p>Did you know that HTTP_X_FORWARDED_FOR can return multiple IPs? According to <a href="http://en.wikipedia.org/wiki/X-Forwarded-For" target="_blank" rel="noopener noreferrer">http://en.wikipedia.org/wiki/X-Forwarded-For</a> the format is:</p>
<pre>X-Forwarded-For: client, proxy1, proxy2
</pre>
<p> </p>
<p>So you just need:</p>
<p><script src="https://gist.github.com/georgekosmidis/f034aae91af16a0bbf8276747680cadc.js"></script></p>
<p>Simple as that </p>